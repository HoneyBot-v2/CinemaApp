services:
  cinema-api:
    build:
      context: .
      dockerfile: Dockerfile
      target: final
    container_name: cinema-api
    environment:
      ASPNETCORE_ENVIRONMENT: "Development"

      # This maps to ConnectionStrings:Default in config
      # DB file path is inside the container at /data/cinema.db
      ConnectionStrings__Default: "Data Source=/data/cinema.db"
    ports:
      - "8080:8080"

    # Persist the SQLite file so it survives container recreation
    volumes:
      - cinema-sqlite-data:/data

volumes:
  cinema-sqlite-data:
